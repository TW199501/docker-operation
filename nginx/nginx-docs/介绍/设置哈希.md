# 設置哈希

為了快速處理靜態數據集，如伺服器名稱、[map](http://nginx.org/en/docs/http/ngx_http_map_module.html#map) 指令值、MIME 類型、請求頭字串的名稱，nginx 使用了哈希表。在開始和每次重新配置時，nginx 盡可能選擇最小的哈希表，以便儲存具有相同散列值的儲存桶大小不會超過配置參數（哈希桶大小）。表的大小以桶為單位。調整是持續的，直到表的大小超過哈希的最大大小參數。大多數哈希具有修改這些參數對應的指令，例如，對於伺服器名稱哈希，它們是 [server_names_hash_max](http://nginx.org/en/docs/http/ngx_http_core_module.html#server_names_hash_max_size) 和 [server_names_hash_bucket_size](http://nginx.org/en/docs/http/ngx_http_core_module.html#server_names_hash_bucket_size)。

哈希桶大小參數與處理器的快取記憶體線大小的倍數對齊。可以透過減少記憶體訪問的次數來加快現代處理器的哈希鍵搜索速度。如果哈希桶大小等於處理器的快取記憶體線大小，則哈希鍵搜索期間記憶體訪問次數最壞的情況下將有兩次 —— 一是計算桶地址，二是在桶內搜索哈希鍵期間。因此，如果 nginx 發出消息請求增加到哈希的最大大小或者哈希桶的大小，那麼首先應該增加第一個參數。

## 原文件

- [http://nginx.org/en/docs/hash.html](http://nginx.org/en/docs/hash.html)
