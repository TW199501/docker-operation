global
  log stdout format raw local0

defaults
  log     global
  mode    http
  option  httplog
  timeout connect 5s
  timeout client  30s
  timeout server  30s

listen stats
  bind *:8404
  mode http
  stats enable
  stats uri /stats
  stats refresh 10s
  stats auth admin:changeme

frontend http-in
  bind *:80
  default_backend nginx_http

frontend https-in
  bind *:443
  mode tcp
  default_backend nginx_https

backend nginx_http
  balance roundrobin
  # Docker 內部 elf-nginx 容器
  server docker_elf elf-nginx:80 check

backend nginx_https
  mode tcp
  server docker_elf_tls elf-nginx:443 check

  # ===== 範例：如果未來要加「實體機 / 其他 VM」上的 Nginx 節點 =====
  # 台1 Nginx（web1.example.com，內網 IP 192.168.25.10）
  # server web1 web1.example.com:80 check
  # 台2 Nginx（web2.example.com，內網 IP 192.168.25.11）
  # server web2 web2.example.com:80 check

#backend nginx_https
#  mode tcp
#  # Docker 內部 elf-nginx（HTTPS，TCP 模式直通）
#  server docker_elf_443 elf-nginx:443 check
#
#  # ===== 範例：多台 HTTPS Nginx 節點 =====
#  # 台1 Nginx（web1.example.com，內網 IP 192.168.25.10）
#  # server web1_443 web1.example.com:443 check
#  # 台2 Nginx（web2.example.com，內網 IP 192.168.25.11）
#  # server web2_443 web2.example.com:443 check
